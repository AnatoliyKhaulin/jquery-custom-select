{"version":3,"sources":["../../jquery.custom-select.js"],"names":["CustomSelect","$","options","each","$select","optionsArray","defaults","autocomplete","autocompletePlaceholder","block","hideCallback","includeValue","keyboard","modifier","placeholder","showCallback","transition","extend","hide","after","$selectOptions","find","customSelect","customSelectActiveModifier","customSelectDropupModifier","dropdownOptionHtml","dropdownOptions","$customSelect","next","$customSelectValue","$dropdown","addClass","createOptionsArray","html","$input","attr","append","length","i","el","cssClass","eq","$currentOption","text","trim","prop","data","setDropdownToggle","$dropdownOptions","$optionWrap","wrapAll","on","event","preventDefault","choice","removeClass","splice","option","$option","hideDropdown","remove","$this","originalEvent","trigger","index","scrollTop","query","val","setTimeout","match","toLowerCase","indexOf","toggle","show","push","slideUp","call","window","off","outsideClickHandler","toggleDropupModifier","blur","keyboardHandler","one","slideDown","document","documentElement","bottom","getBoundingClientRect","toggleClass","height","$target","target","parents","is","visibleOptions","keyCode","focus","fn"],"mappings":"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","file":"jquery.custom-select.js","sourcesContent":["import $ from 'jquery';\r\n\r\n/*!\r\n * Custom Select jQuery Plugin\r\n */\r\n\r\nconst CustomSelect = (($) => {\r\n\r\n  /**\r\n   * Custom Select\r\n   *\r\n   * Creates custom dropdown instead of default `<select>`\r\n   *\r\n   * @param {Object} [options] - Settings object\r\n   * @param {boolean} [options.autocomplete=false] - Adds input to filter options\r\n   * @param {string} [options.autocompletePlaceholder=false] - Autocomplete input\r\n   * placeholder hint (appears if autocomplete option is not false)\r\n   * @param {string} [options.block=custom-select] - Class name (BEM block name)\r\n   * @param {Function} [options.hideCallback=false] - Fires after dropdown closes\r\n   * @param {boolean} [options.includeValue=false] - Shows chosen value option in\r\n   * dropdown, if enabled also cancels dropdown options rerender\r\n   * @param {boolean} [options.keyboard=true] - Enables keyboard control\r\n   * @param {string} [options.modifier=false] - Additional class, e.g. BEM modifier\r\n   * @param {string} [options.placeholder=false] - Custom select placeholder hint,\r\n   * can be an HTML string (appears if there is no explicitly selected options)\r\n   * @param {Function} [options.showCallback=false] - Fires after dropdown opens\r\n   * @param {number || string} [options.transition=100] - jQuery slideUp/Down speed\r\n   */\r\n  function CustomSelect(options) {\r\n    $(this).each(function () {\r\n      let $select = $(this);\r\n      let optionsArray = [];\r\n\r\n      const defaults = {\r\n        autocomplete: false,\r\n        autocompletePlaceholder: false,\r\n        block: 'custom-select',\r\n        hideCallback: false,\r\n        includeValue: false,\r\n        keyboard: true,\r\n        modifier: false,\r\n        placeholder: false,\r\n        showCallback: false,\r\n        transition: 100\r\n      };\r\n\r\n      if (typeof options === 'object') {\r\n        $.extend(defaults, options);\r\n      }\r\n\r\n      $select\r\n        .hide()\r\n        .after(\r\n          `<div class=\"${defaults.block}\">\r\n             <button class=\"${defaults.block}__option ${defaults.block}__option--value\"></button>\r\n             <div class=\"${defaults.block}__dropdown\"></div>\r\n           </div>`\r\n        );\r\n\r\n      let $selectOptions = $select.find('option');\r\n\r\n      const customSelect = `.${defaults.block}`;\r\n      const customSelectActiveModifier = `${defaults.block}--active`;\r\n      const customSelectDropupModifier = `${defaults.block}--dropup`;\r\n      const dropdownOptionHtml = `<button class=\"${defaults.block}__option\"></button>`;\r\n      const dropdownOptions = `${customSelect}__option`;\r\n\r\n      let $customSelect = $select.next(customSelect);\r\n      let $customSelectValue = $customSelect.find(`${customSelect}__option--value`);\r\n      let $dropdown = $customSelect.find(`${customSelect}__dropdown`);\r\n\r\n      if (defaults.modifier) {\r\n        $customSelect.addClass(defaults.modifier);\r\n      }\r\n\r\n      createOptionsArray();\r\n      $dropdown.html('').hide();\r\n      let $input = null;\r\n\r\n      // Add autocomplete input\r\n      if (defaults.autocomplete) {\r\n        $input = $(`<input class=\"${defaults.block}__input\">`);\r\n        if (defaults.autocompletePlaceholder) {\r\n          $input.attr('placeholder', defaults.autocompletePlaceholder);\r\n        }\r\n        $dropdown.append($input);\r\n      }\r\n\r\n      // Disable placeholder if there is explicitly selected option\r\n      if ($select.find('[selected]').length) {\r\n        defaults.placeholder = false;\r\n      }\r\n\r\n      // Create custom select options\r\n      $.each(optionsArray, (i, el) => {\r\n        let cssClass = $selectOptions.eq(i).attr('class');\r\n        let $currentOption = $(dropdownOptionHtml).text(el).addClass(cssClass);\r\n\r\n        if (el === $select.find(':selected').text().trim()) {\r\n          if (!defaults.placeholder) {\r\n            $customSelectValue.text(el);\r\n          } else {\r\n            $customSelectValue.html(defaults.placeholder);\r\n            // Set select value to null\r\n            $select.prop('selectedIndex', -1);\r\n          }\r\n          $customSelectValue.addClass(cssClass).data('class', cssClass);\r\n          if (defaults.includeValue || defaults.placeholder) {\r\n            $dropdown.append($currentOption);\r\n          }\r\n        } else {\r\n          $dropdown.append($currentOption);\r\n        }\r\n      });\r\n\r\n      setDropdownToggle();\r\n\r\n      let $dropdownOptions = $dropdown.find(dropdownOptions);\r\n      let $optionWrap = null;\r\n\r\n      if (defaults.autocomplete) {\r\n        $dropdownOptions.wrapAll(`<div class=\"${defaults.block}__option-wrap\"></div>`);\r\n        $optionWrap = $dropdown.find(`${customSelect}__option-wrap`);\r\n      }\r\n\r\n      $dropdownOptions.on('click', function (event) {\r\n        event.preventDefault();\r\n        let choice = $(this).text().trim();\r\n        $customSelectValue.text(choice).removeClass($customSelectValue.data('class'));\r\n        $selectOptions.prop('selected', false);\r\n\r\n        $.each(optionsArray, (i, el) => {\r\n          if (!defaults.includeValue && el === choice) {\r\n            optionsArray.splice(i, 1);\r\n          }\r\n\r\n          $.each($selectOptions, function (i, option) {\r\n            let $option = $(option);\r\n            if ($option.text().trim() === choice) {\r\n              let cssClass = $option.attr('class');\r\n              $option.prop('selected', true);\r\n              $customSelectValue.addClass(cssClass).data('class', cssClass);\r\n            }\r\n          });\r\n        });\r\n\r\n        hideDropdown();\r\n\r\n        // Recreate custom select dropdown options\r\n        if (!defaults.includeValue) {\r\n          if ($dropdownOptions.length > optionsArray.length - 1) {\r\n            $dropdownOptions.eq(optionsArray.length).remove();\r\n          }\r\n          $.each($dropdownOptions, (i, option) => {\r\n            let $option = $(option);\r\n            $option.text(optionsArray[i]);\r\n\r\n            // Reset option class\r\n            $option.attr('class', `${defaults.block}__option`);\r\n\r\n            $.each($selectOptions, function () {\r\n              let $this = $(this);\r\n              if ($this.text().trim() === optionsArray[i]) {\r\n                $option.addClass($this.attr('class'));\r\n              }\r\n            });\r\n          });\r\n        }\r\n\r\n        createOptionsArray();\r\n\r\n        if (typeof event.originalEvent !== 'undefined') {\r\n          $select.trigger('change');\r\n        }\r\n      });\r\n\r\n      // Autocomplete\r\n      if (defaults.autocomplete) {\r\n        $input.on('focus', function () {\r\n          defaults.index = -1;\r\n          $optionWrap.scrollTop(0);\r\n        });\r\n\r\n        $input.on('keyup', function () {\r\n          let query = $input.val().trim();\r\n          if (query.length) {\r\n            setTimeout(() => {\r\n              if (query === $input.val().trim()) {\r\n                $.each($dropdownOptions, (i, option) => {\r\n                  let $option = $(option);\r\n                  let match = $option.text().trim().toLowerCase().indexOf(query.toLowerCase()) !== -1;\r\n                  $option.toggle(match);\r\n                });\r\n              }\r\n            }, 300);\r\n          } else {\r\n            $dropdownOptions.show();\r\n          }\r\n        });\r\n      }\r\n\r\n      function createOptionsArray() {\r\n        optionsArray = [];\r\n\r\n        $.each($selectOptions, (i, option) => {\r\n          let el = $(option).text().trim();\r\n          optionsArray.push(el);\r\n        });\r\n      }\r\n\r\n      function hideDropdown() {\r\n        $dropdown.slideUp(defaults.transition, () => {\r\n          $customSelect\r\n            .removeClass(customSelectActiveModifier)\r\n            .removeClass(customSelectDropupModifier);\r\n\r\n          // Close callback\r\n          if (typeof defaults.hideCallback === 'function') {\r\n            defaults.hideCallback.call($customSelect[0]);\r\n          }\r\n        });\r\n\r\n        $(window)\r\n          .off('touchstart click', outsideClickHandler)\r\n          .off('resize scroll', toggleDropupModifier);\r\n        $customSelectValue.off('click');\r\n        setDropdownToggle();\r\n\r\n        if (defaults.keyboard) {\r\n          $dropdownOptions.blur();\r\n          $(window).off('keydown', keyboardHandler);\r\n        }\r\n\r\n        // Clear autocomplete\r\n        if (defaults.autocomplete) {\r\n          $dropdownOptions.show();\r\n          $input.val('');\r\n          $optionWrap.scrollTop(0);\r\n        }\r\n      }\r\n\r\n      function setDropdownToggle() {\r\n        $customSelectValue.one('click', (event) => {\r\n          event.preventDefault();\r\n\r\n          $customSelect.addClass(customSelectActiveModifier);\r\n\r\n          // Set dropdown position\r\n          toggleDropupModifier();\r\n          $(window).on('resize scroll', toggleDropupModifier);\r\n\r\n          $dropdown.slideDown(defaults.transition, () => {\r\n            // Open callback\r\n            if (typeof defaults.showCallback === 'function') {\r\n              defaults.showCallback.call($customSelect[0]);\r\n            }\r\n          });\r\n\r\n          $(window).on('ontouchstart' in document.documentElement ? 'touchstart' : 'click', outsideClickHandler);\r\n          $customSelectValue.one('click', (event) => {\r\n            event.preventDefault();\r\n            hideDropdown();\r\n          });\r\n\r\n          if (defaults.keyboard) {\r\n            defaults.index = -1;\r\n            $(window).on('keydown', keyboardHandler);\r\n          }\r\n        });\r\n      }\r\n\r\n      function toggleDropupModifier() {\r\n        let bottom = $customSelect[0].getBoundingClientRect().bottom;\r\n        $customSelect.toggleClass(customSelectDropupModifier, $(window).height() - bottom < $dropdown.height());\r\n      }\r\n\r\n      function outsideClickHandler(event) {\r\n        let $target = $(event.target);\r\n        if (!$target.parents().is($customSelect) && !$target.is($customSelect)) {\r\n          hideDropdown();\r\n        }\r\n      }\r\n\r\n      function keyboardHandler(event) {\r\n        let visibleOptions = dropdownOptions + ':visible';\r\n\r\n        switch (event.keyCode) {\r\n          // Down\r\n          case 40:\r\n            event.preventDefault();\r\n            if ($dropdown.find(visibleOptions).eq(defaults.index + 1).length !== 0) {\r\n              defaults.index += 1;\r\n            } else {\r\n              defaults.index = 0;\r\n            }\r\n            $dropdown.find(visibleOptions).eq(defaults.index).focus();\r\n            break;\r\n          // Up\r\n          case 38:\r\n            event.preventDefault();\r\n            if ($dropdown.find(visibleOptions).eq(defaults.index - 1).length !== 0 && defaults.index - 1 >= 0) {\r\n              defaults.index -= 1;\r\n            } else {\r\n              defaults.index = $dropdown.find(visibleOptions).length - 1;\r\n            }\r\n            $dropdown.find(visibleOptions).eq(defaults.index).focus();\r\n            break;\r\n          // Enter\r\n          case 13:\r\n          // Space\r\n          case 32:\r\n            if (!$input || !$input.is(':focus')) {\r\n              event.preventDefault();\r\n              $(dropdownOptions + ':focus').trigger('click');\r\n              $select.trigger('change');\r\n              $customSelectValue.focus();\r\n            }\r\n            break;\r\n          // Esc\r\n          case 27:\r\n            event.preventDefault();\r\n            hideDropdown();\r\n            $customSelectValue.focus();\r\n            break;\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  $.fn['customSelect'] = CustomSelect;\r\n\r\n})($);\r\n\r\nexport default CustomSelect;\r\n"]}