{"version":3,"sources":["../../jquery.custom-select.js"],"names":["CustomSelect","$","options","each","$select","optionsArray","defaults","autocomplete","autocompletePlaceholder","block","hideCallback","includeValue","keyboard","modifier","placeholder","showCallback","transition","extend","hide","after","$selectOptions","find","customSelect","customSelectActiveModifier","dropdownOptionHtml","dropdownOptions","$customSelect","next","$customSelectValue","$dropdown","addClass","createOptionsArray","html","$input","attr","append","length","i","el","cssClass","eq","$currentOption","text","trim","prop","data","setDropdownToggle","$dropdownOptions","$optionWrap","wrapAll","on","event","choice","removeClass","splice","option","$option","hideDropdown","remove","$this","originalEvent","trigger","index","scrollTop","query","val","setTimeout","match","toLowerCase","indexOf","toggle","show","push","slideUp","call","window","off","windowEventHandler","blur","keyboardHandler","one","windowEvent","document","documentElement","slideDown","$target","target","parents","is","visibleOptions","keyCode","preventDefault","focus","fn"],"mappings":"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","file":"jquery.custom-select.js","sourcesContent":["import $ from 'jquery';\r\n\r\n/*!\r\n * Custom Select jQuery Plugin\r\n */\r\n\r\nconst CustomSelect = (($) => {\r\n\r\n  /**\r\n   * Custom Select\r\n   *\r\n   * Creates custom dropdown instead of default `<select>`\r\n   *\r\n   * @param {Object} [options] - Settings object\r\n   * @param {boolean} [options.autocomplete=false] - Adds input to filter options\r\n   * @param {string} [options.autocompletePlaceholder=false] - Autocomplete input\r\n   * placeholder hint (appears if autocomplete option is not false)\r\n   * @param {string} [options.block=custom-select] - Class name (BEM block name)\r\n   * @param {Function} [options.hideCallback=false] - Fires after dropdown closes\r\n   * @param {boolean} [options.includeValue=false] - Shows chosen value option in\r\n   * dropdown, if enabled also cancels dropdown options rerender\r\n   * @param {boolean} [options.keyboard=true] - Enables keyboard control\r\n   * @param {string} [options.modifier=false] - Additional class, e.g. BEM modifier\r\n   * @param {string} [options.placeholder=false] - Custom select placeholder hint,\r\n   * can be an HTML string (appears if there is no explicitly selected options)\r\n   * @param {Function} [options.showCallback=false] - Fires after dropdown opens\r\n   * @param {number || string} [options.transition=100] - jQuery slideUp/Down speed\r\n   */\r\n  function CustomSelect(options) {\r\n    $(this).each(function () {\r\n      let $select = $(this);\r\n      let optionsArray = [];\r\n\r\n      const defaults = {\r\n        autocomplete: false,\r\n        autocompletePlaceholder: false,\r\n        block: 'custom-select',\r\n        hideCallback: false,\r\n        includeValue: false,\r\n        keyboard: true,\r\n        modifier: false,\r\n        placeholder: false,\r\n        showCallback: false,\r\n        transition: 100\r\n      };\r\n\r\n      if (typeof options === 'object') {\r\n        $.extend(defaults, options);\r\n      }\r\n\r\n      $select\r\n        .hide()\r\n        .after(\r\n          `<div class=\"${defaults.block}\">\r\n             <button class=\"${defaults.block}__option ${defaults.block}__option--value\"></button>\r\n             <div class=\"${defaults.block}__dropdown\"></div>\r\n           </div>`\r\n        );\r\n\r\n      let $selectOptions = $select.find('option');\r\n\r\n      const customSelect = `.${defaults.block}`;\r\n      const customSelectActiveModifier = `${defaults.block}--active`;\r\n      const dropdownOptionHtml = `<button class=\"${defaults.block}__option\"></button>`;\r\n      const dropdownOptions = `${customSelect}__option`;\r\n\r\n      let $customSelect = $select.next(customSelect);\r\n      let $customSelectValue = $customSelect.find(`${customSelect}__option--value`);\r\n      let $dropdown = $customSelect.find(`${customSelect}__dropdown`);\r\n\r\n      if (defaults.modifier) {\r\n        $customSelect.addClass(defaults.modifier);\r\n      }\r\n\r\n      createOptionsArray();\r\n      $dropdown.html('').hide();\r\n      let $input = null;\r\n\r\n      // Add autocomplete input\r\n      if (defaults.autocomplete) {\r\n        $input = $(`<input class=\"${defaults.block}__input\">`);\r\n        if (defaults.autocompletePlaceholder) {\r\n          $input.attr('placeholder', defaults.autocompletePlaceholder);\r\n        }\r\n        $dropdown.append($input);\r\n      }\r\n\r\n      // Disable placeholder if there is explicitly selected option\r\n      if ($select.find('[selected]').length) {\r\n        defaults.placeholder = false;\r\n      }\r\n\r\n      // Create custom select options\r\n      $.each(optionsArray, (i, el) => {\r\n        let cssClass = $selectOptions.eq(i).attr('class');\r\n        let $currentOption = $(dropdownOptionHtml).text(el).addClass(cssClass);\r\n\r\n        if (el === $select.find(':selected').text().trim()) {\r\n          if (!defaults.placeholder) {\r\n            $customSelectValue.text(el);\r\n          } else {\r\n            $customSelectValue.html(defaults.placeholder);\r\n            // Set select value to null\r\n            $select.prop('selectedIndex', -1);\r\n          }\r\n          $customSelectValue.addClass(cssClass).data('class', cssClass);\r\n          if (defaults.includeValue || defaults.placeholder) {\r\n            $dropdown.append($currentOption);\r\n          }\r\n        } else {\r\n          $dropdown.append($currentOption);\r\n        }\r\n      });\r\n\r\n      setDropdownToggle();\r\n\r\n      let $dropdownOptions = $dropdown.find(dropdownOptions);\r\n      let $optionWrap = null;\r\n\r\n      if (defaults.autocomplete) {\r\n        $dropdownOptions.wrapAll(`<div class=\"${defaults.block}__option-wrap\"></div>`);\r\n        $optionWrap = $dropdown.find(`${customSelect}__option-wrap`);\r\n      }\r\n\r\n      $dropdownOptions.on('click', function (event) {\r\n        let choice = $(this).text().trim();\r\n        $customSelectValue.text(choice).removeClass($customSelectValue.data('class'));\r\n        $selectOptions.prop('selected', false);\r\n\r\n        $.each(optionsArray, (i, el) => {\r\n          if (!defaults.includeValue && el === choice) {\r\n            optionsArray.splice(i, 1);\r\n          }\r\n          $.each($selectOptions, function (i, option) {\r\n            let $option = $(option);\r\n            if ($option.text().trim() === choice) {\r\n              let cssClass = $option.attr('class');\r\n              $option.prop('selected', true);\r\n              $customSelectValue.addClass(cssClass).data('class', cssClass);\r\n            }\r\n          });\r\n        });\r\n\r\n        hideDropdown();\r\n\r\n        // Recreate custom select dropdown options\r\n        if (!defaults.includeValue) {\r\n          if ($dropdownOptions.length > optionsArray.length - 1) {\r\n            $dropdownOptions.eq(optionsArray.length).remove();\r\n          }\r\n          $.each($dropdownOptions, (i, option) => {\r\n            let $option = $(option);\r\n            $option.text(optionsArray[i]);\r\n\r\n            // Reset option class\r\n            $option.attr('class', `${defaults.block}__option`);\r\n\r\n            $.each($selectOptions, function () {\r\n              let $this = $(this);\r\n              if ($this.text().trim() === optionsArray[i]) {\r\n                $option.addClass($this.attr('class'));\r\n              }\r\n            });\r\n          });\r\n        }\r\n\r\n        createOptionsArray();\r\n\r\n        if (typeof event.originalEvent !== 'undefined') {\r\n          $select.trigger('change');\r\n        }\r\n      });\r\n\r\n      // Autocomplete\r\n      if (defaults.autocomplete) {\r\n        $input.on('focus', function () {\r\n          defaults.index = -1;\r\n          $optionWrap.scrollTop(0);\r\n        });\r\n\r\n        $input.on('keyup', function () {\r\n          let query = $input.val().trim();\r\n          if (query.length) {\r\n            setTimeout(() => {\r\n              if (query === $input.val().trim()) {\r\n                $.each($dropdownOptions, (i, option) => {\r\n                  let $option = $(option);\r\n                  let match = $option.text().trim().toLowerCase().indexOf(query.toLowerCase()) !== -1;\r\n                  $option.toggle(match);\r\n                });\r\n              }\r\n            }, 300);\r\n          } else {\r\n            $dropdownOptions.show();\r\n          }\r\n        });\r\n      }\r\n\r\n      function createOptionsArray() {\r\n        optionsArray = [];\r\n\r\n        $.each($selectOptions, (i, option) => {\r\n          let el = $(option).text().trim();\r\n          optionsArray.push(el);\r\n        });\r\n      }\r\n\r\n      function hideDropdown() {\r\n        $dropdown.slideUp(defaults.transition, () => {\r\n          $customSelect.removeClass(customSelectActiveModifier);\r\n\r\n          // Close callback\r\n          if (typeof defaults.hideCallback === 'function') {\r\n            defaults.hideCallback.call($customSelect[0]);\r\n          }\r\n        });\r\n\r\n        $(window).off('click touchstart', windowEventHandler);\r\n        $customSelectValue.off('click');\r\n        setDropdownToggle();\r\n\r\n        if (defaults.keyboard) {\r\n          $dropdownOptions.blur();\r\n          $(window).off('keydown', keyboardHandler);\r\n        }\r\n\r\n        // Clear autocomplete\r\n        if (defaults.autocomplete) {\r\n          $dropdownOptions.show();\r\n          $input.val('');\r\n          $optionWrap.scrollTop(0);\r\n        }\r\n      }\r\n\r\n      function setDropdownToggle() {\r\n        $customSelectValue.one('click', () => {\r\n          const windowEvent = 'ontouchstart' in document.documentElement ? 'touchstart' : 'click';\r\n\r\n          $customSelect.addClass(customSelectActiveModifier);\r\n          $dropdown.slideDown(defaults.transition, () => {\r\n            // Open callback\r\n            if (typeof defaults.showCallback === 'function') {\r\n              defaults.showCallback.call($customSelect[0]);\r\n            }\r\n          });\r\n\r\n          $(window).on(windowEvent, windowEventHandler);\r\n          $customSelectValue.one('click', () => {\r\n            hideDropdown();\r\n          });\r\n\r\n          if (defaults.keyboard) {\r\n            defaults.index = -1;\r\n            $(window).on('keydown', keyboardHandler);\r\n          }\r\n        });\r\n      }\r\n\r\n      function windowEventHandler(event) {\r\n        let $target = $(event.target);\r\n        if (!$target.parents().is($customSelect) && !$target.is($customSelect)) {\r\n          hideDropdown();\r\n        }\r\n      }\r\n\r\n      function keyboardHandler(event) {\r\n        let visibleOptions = dropdownOptions + ':visible';\r\n\r\n        switch (event.keyCode) {\r\n          // Down\r\n          case 40:\r\n            event.preventDefault();\r\n            if ($dropdown.find(visibleOptions).eq(defaults.index + 1).length !== 0) {\r\n              defaults.index += 1;\r\n            } else {\r\n              defaults.index = 0;\r\n            }\r\n            $dropdown.find(visibleOptions).eq(defaults.index).focus();\r\n            break;\r\n          // Up\r\n          case 38:\r\n            event.preventDefault();\r\n            if ($dropdown.find(visibleOptions).eq(defaults.index - 1).length !== 0 && defaults.index - 1 >= 0) {\r\n              defaults.index -= 1;\r\n            } else {\r\n              defaults.index = $dropdown.find(visibleOptions).length - 1;\r\n            }\r\n            $dropdown.find(visibleOptions).eq(defaults.index).focus();\r\n            break;\r\n          // Enter\r\n          case 13:\r\n          // Space\r\n          case 32:\r\n            if (!$input || !$input.is(':focus')) {\r\n              event.preventDefault();\r\n              $(dropdownOptions + ':focus').trigger('click');\r\n              $select.trigger('change');\r\n              $customSelectValue.focus();\r\n            }\r\n            break;\r\n          // Esc\r\n          case 27:\r\n            event.preventDefault();\r\n            hideDropdown();\r\n            $customSelectValue.focus();\r\n            break;\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  $.fn['customSelect'] = CustomSelect;\r\n\r\n})($);\r\n\r\nexport default CustomSelect;\r\n"]}